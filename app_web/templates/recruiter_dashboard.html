{% load static %}

<style>
    /* ===== TOP CARD COLORS ===== */

    /* PRIMARY */
    .card-border-shadow-primary {
        border-bottom: 2px solid rgba(105, 108, 255, .35);
    }

    .card-border-shadow-primary:hover {
        border-bottom-color: #696cff;
    }

    /* WARNING */
    .card-border-shadow-warning {
        border-bottom: 2px solid rgba(255, 171, 0, .35);
    }

    .card-border-shadow-warning:hover {
        border-bottom-color: #ffab00;
    }

    /* DANGER */
    .card-border-shadow-danger {
        border-bottom: 2px solid rgba(255, 62, 29, .35);
    }

    .card-border-shadow-danger:hover {
        border-bottom-color: #ff3e1d;
    }

    /* INFO */
    .card-border-shadow-info {
        border-bottom: 2px solid rgba(3, 195, 236, .35);
    }

    .card-border-shadow-info:hover {
        border-bottom-color: #03c3ec;
    }

    /* ===== BOTTOM CARD COLORS (UNIQUE – NO DUPLICATES) ===== */

    /* MAROON – Rejected by Client */
    .card-border-shadow-maroon {
        border-bottom: 2px solid rgba(128, 0, 64, .35);
    }

    .card-border-shadow-maroon:hover {
        border-bottom-color: #800040;
    }

    /* EMERALD – Selected by Client */
    .card-border-shadow-emerald {
        border-bottom: 2px solid rgba(0, 168, 120, .35);
    }

    .card-border-shadow-emerald:hover {
        border-bottom-color: #00a878;
    }

    /* SLATE PURPLE – Waiting Feedback */
    .card-border-shadow-slate {
        border-bottom: 2px solid rgba(88, 86, 214, .35);
    }

    .card-border-shadow-slate:hover {
        border-bottom-color: #5856d6;
    }

    /* ===== COMMON STYLES ===== */

    .card-body {
        padding: 20px 22px;
    }

    .avatar {
        width: 46px;
        height: 46px;
    }

    .avatar-initial {
        width: 46px;
        height: 46px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 10px;
    }

    .icon-lg {
        font-size: 2rem;
    }

    .card h4 {
        font-size: 2.2rem;
        font-weight: 400;
        color: #384551;
    }

    .card p.mb-2 {
        font-size: 14px;
        color: #6f6b7d;
        margin-bottom: 6px;
    }

    .text-heading {
        font-size: 14px;
        font-weight: 600;
    }

    .text-body-secondary {
        font-size: 14px;
        color: #a1a1aa;
    }

    .credits-container {
        display: none;
    }

    .form-label {
        white-space: nowrap;
    }
</style>


<h4 class="p-clr"> Recruiter Dashboard</h4>


<!-- ===== FILTERS ROW ===== -->
<div class="container-xxl flex-grow-1 container-p-y">


    <div class="row align-items-center">

        <!-- LEFT : Recruiter Filter -->
        <div class="col-md-6 col-sm-12">
            <div class="d-flex align-items-center">
                <label class="form-label fw-semibold mb-0 me-2">
                    Recruiter
                </label>
                <select class="form-select" id="recruiterFilter" style="max-width: 220px;">
                    {% if show_all_option %}
                    <option value="">All Recruiters</option>
                    {% endif %}

                    {% for recruiter in recruiters %}
                    <option value="{{ recruiter.id }}">
                        {{ recruiter.name }}
                    </option>
                    {% endfor %}

                </select>

            </div>
        </div>

        <!-- RIGHT : Month Filter -->
        <div class="col-md-6 col-sm-12 d-flex justify-content-md-end mt-3 mt-md-0">
            <div class="d-flex align-items-center">
                <label class="form-label fw-semibold mb-0 me-2">
                    Month
                </label>
                <input type="month" class="form-control" id="monthFilter" style="max-width: 200px;">
            </div>
        </div>

    </div>
</div>


<!-- ===== TOP ROW ===== -->
<div class="container-xxl flex-grow-1 py-2 px-3">
    <div class="row g-6">

        <div class="col-lg-3 col-sm-6">
            <div class="card card-border-shadow-primary h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-2">
                        <div class="avatar me-4">
                            <span class="avatar-initial rounded bg-label-primary">
                                <i class="bx bx-file icon-lg"></i>
                            </span>
                        </div>
                        <h4 class="mb-0" id=submittedCount>{{ submitted }}</h4>
                    </div>
                    <p class="mb-2">Profiles Received</p>
                    <p class="mb-0">
                        <span class="text-heading fw-medium me-2">{{submitted_percentage}}%</span>
                        <span class="text-body-secondary comparisonText">{{comparison_text}}</span>
                    </p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-sm-6">
            <div class="card card-border-shadow-warning h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-2">
                        <div class="avatar me-4">
                            <span class="avatar-initial rounded bg-label-warning">
                                <i class="icon-base bx bx-user-check icon-lg"></i>
                            </span>
                        </div>
                        <h4 class="mb-0" id=profiledCount>{{ profiled }}</h4>
                    </div>
                    <p class="mb-2">Reviewed and Profiled</p>
                    <p class="mb-0">
                        <span class="text-heading fw-medium me-2">{{profiled_percentage}}%</span>
                        <span class="text-body-secondary comparisonText">{{comparison_text}}</span>
                    </p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-sm-6">
            <div class="card card-border-shadow-danger h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-2">
                        <div class="avatar me-4">
                            <span class="avatar-initial rounded bg-label-danger">
                                <i class="icon-base bx bx-x-circle icon-lg"></i>
                            </span>
                        </div>
                        <h4 class="mb-0" id=rejectedCount>{{ rejected }}</h4>
                    </div>
                    <p class="mb-2">Reviewed and Rejected</p>
                    <p class="mb-0">
                        <span class="text-heading fw-medium me-2">{{rejected_percentage}}%</span>
                        <span class="text-body-secondary comparisonText">{{comparison_text}}</span>
                    </p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-sm-6">
            <div class="card card-border-shadow-info h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-2">
                        <div class="avatar me-4">
                            <span class="avatar-initial rounded bg-label-info">
                                <i class="icon-base bx bx-briefcase-alt icon-lg"></i>
                            </span>
                        </div>
                        <h4 class="mb-0" id=sentClientCount>{{ sent_client }}</h4>
                    </div>
                    <p class="mb-2">Profiles Submitted to Client</p>
                    <p class="mb-0">
                        <span class="text-heading fw-medium me-2">{{sent_client_percentage}}%</span>
                        <span class="text-body-secondary comparisonText">{{comparison_text}}</span>
                    </p>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- ===== BOTTOM ROW (UNIQUE COLORS) ===== -->
<div class="container-xxl flex-grow-1 py-2 px-3">

    <div class="row g-6">

        <div class="col-lg-3 col-sm-6">
            <div class="card card-border-shadow-maroon h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-2">
                        <div class="avatar me-4">
                            <span class="avatar-initial rounded" style="background:rgba(128,0,64,.15);color:#800040;">
                                <i class="icon-base bx bx-x-circle icon-lg"></i>
                            </span>
                        </div>
                        <h4 class="mb-0" id=rejectedClientCount>{{ rejected_client }}</h4>
                    </div>
                    <p class="mb-2">Profiles Rejected by Client</p>
                    <p class="mb-0">
                        <span class="text-heading fw-medium me-2">{{rejected_client_percentage}}%</span>
                        <span class="text-body-secondary comparisonText">{{comparison_text}}</span>
                    </p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-sm-6">
            <div class="card card-border-shadow-emerald h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-2">
                        <div class="avatar me-4">
                            <span class="avatar-initial rounded" style="background:rgba(0,168,120,.15);color:#00a878;">
                                <i class="icon-base bx bx-badge-check icon-lg"></i>
                            </span>
                        </div>
                        <h4 class="mb-0" id=selectedClientCount>{{ selected_client }}</h4>
                    </div>
                    <p class="mb-2">Profiles Selected by Client</p>
                    <p class="mb-0">
                        <span class="text-heading fw-medium me-2">{{selected_client_percentage}}%</span>
                        <span class="text-body-secondary comparisonText">{{comparison_text}}</span>
                    </p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-sm-6">
            <div class="card card-border-shadow-slate h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-2">
                        <div class="avatar me-4">
                            <span class="avatar-initial rounded" style="background:rgba(88,86,214,.15);color:#5856d6;">
                                <i class="icon-base bx bx-time-five icon-lg"></i>
                            </span>
                        </div>
                        <h4 class="mb-0" id=waitingFeedbackCount>{{ waiting_feedback }}</h4>
                    </div>
                    <p class="mb-2">Waiting for Feedback</p>
                    <p class="mb-0">
                        <span class="text-heading fw-medium me-2">{{waiting_feedback_percentage}}%</span>
                        <span class="text-body-secondary comparisonText">{{comparison_text}}</span>
                    </p>
                </div>
            </div>
        </div>

    </div>
    
</div>
<div class="container-xxl flex-grow-1 py-2 px-3">

<div class="card mb-3">
    <div class="card-title-table">
        <h3 class="card-header"><iconify-icon icon="fe:line-chart" width="30" height="30"
                style="vertical-align: text-top;"></iconify-icon>&nbsp;Activity Chart</h3>
    </div>
    <div class="line-chat-section" style="height: 400px;">
        <canvas id="linechart"></canvas>
        <div id="noGraphData"
         style="
            display:none;
            position:absolute;
            top:50%;
            left:50%;
            transform:translate(-50%, -50%);
            text-align:center;
            color:#6f6b7d;
         ">
        <i class="bx bx-line-chart bx-lg mb-2"></i>
        <p class="mb-0 fw-semibold">
            No data available for the selected filters
        </p>
    </div>

    </div>
</div>
</div>
</div>

<style>
    :root {
        --screening-color: #8763ee;
        --coding-color: #00d462;
        --interview-color: #1f68f3;
    }

    .screening-clr {
        color: var(--screening-color);
    }

    .screening-bgclr {
        background-color: #efebfd;
    }

    .coding-clr {
        color: var(--coding-color);
    }

    .coding-bgclr {
        background-color: #defaeb;
    }

    .interview-clr {
        color: var(--interview-color);
    }

    .interview-bgclr {
        background-color: #e2ebfd;
    }

    .line-chat-section {
        margin-top: 2rem;
        display: flex;
        justify-content: center;
        padding: 10px;
    }

    .source-fs {
        font-size: 1.3rem;
    }

    .source-heading {
        border-radius: 8px 8px 0px 0px;
        text-align: center;
        padding: 5px;
    }

    .source-div .card-body {
        padding: 1rem;
        text-align: center;
    }

    .duration-content {
        font-weight: 600;
        font-size: 1.1rem;
    }
</style>
<script src="{% static 'js/recruiter_dashboard.js' %}"></script>
